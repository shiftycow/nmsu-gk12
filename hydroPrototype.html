<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
		<title>Hydroelectric Dam Simulation</title>
		<link type="text/css" href="jquery/css/smoothness/jquery-ui-1.8.9.custom.css" rel="stylesheet" />	
		
		<script type="text/javascript">
		
		var img;
		var canvas = null; // canvas DOM object
		var context = null; // canvas context
		
		
		function init()
		{
			canvas=document.getElementById("dam_canvas");
			if(canvas.getContext)
			{
				img = new Image();
				img.src = 'img/DamPrototype.svg';
				context=canvas.getContext("2d");
				draw();
			}
		}
		
		function draw(){
			context.drawImage(img, 0, 0);
		}
		
		var PowConstant = 10 * 9.8 * 0.5; //Flow * G * k		
		function update(){
			console.log("Hit update()");
			//$( "#Level" ).val($( "#height_slider" ).slider( "values", 0 ));
			if( $("#height_slider").slider != null)
			{
				console.log("	update(): height_slider.slider isn't null");
				if( $( "#height_slider").slider.values != null)
				{
					console.log("		update(): height_slider.slider.values isn't null");
					$( "#height_slider").slider.values[0] = $("#Level").val();
					$( "#Power" ).val($("#Level").val() * 10 * 9.8 * 0.5);
				}
				else
				{
					console.log("		update(): height_slider.slider.values is null");
					console.log("		update(): creating values[] for slider, #Level.val=="+ $("#Level").val());
					$( "#height_slider" ).slider.values = [];
					//$( "#height_slider" ).slider.ui.values = [];
					$( "#height_slider").slider.values[0] = $("#Level").val();
					//$( "#height_slider").slider.ui.values[0] = $("#Level").val();
					$( "#Power" ).val($("#Level").val() * 10 * 9.8 * 0.5);				
				}
			}
			else
			{
				console.log("	update(): height_slider.slider is null");
				$( "#height_slider" ).slider({
					orientation: "vertical",
					//height: 50;
					//range: true,
					values: [ $("#Level").val() ],
					slide: function( event, ui ) {
						$( "#Level" ).val( ui.values[ 0 ] );
						var Pow = $("#Level").val();// * PowConstant; //water * PowConstant
						$( "#Power" ).val(Pow);
					}
				});
			}
		}
		
		</script>
		
		<script type="text/javascript" src="jquery/js/jquery-1.4.4.min.js"></script>
		<script type="text/javascript" src="jquery/js/jquery-ui-1.8.9.custom.min.js"></script>
		
        <link type="text/css" href="default.css" rel="stylesheet" />	
        <link type="text/css" href="hydrodemo.css" rel="stylesheet" />	

	</head>
	<body>

<div id="header"> 
<h1>Hydroelectric Dam Simulation</h1> 
</div><!--end header--> 
 
<div id="content">
<div id="column_container">
<div id="column1">
<!--<canvas id="dam_canvas" width="960" height="720"> 
This demo requires browser support for the &lt;canvas&gt; element. This can be found in recent versions of Firefox, Chrome, and Safari.
</canvas> 
-->
<embed src="img/WaterfallSimulationDraftDesign.svg" width="960" height="720"
type="image/svg+xml"
pluginspage="http://www.adobe.com/svg/viewer/install/" />

<!--<svg xmlns="http://www.w3.org/2000/svg"  xmlns:xlink="http://www.w3.org/1999/xlink">
  <use xlink="img/DamPrototype.svg"/>
</svg>-->
</div><!--end column1-->

<div id="column2">
<div id="controls">     
    <div id="height_slider" style="height:700px;"></div> 
    <script type="text/javascript"> 
        //initialize the incidence slider
        //$("#height_slider").slider({orientation: "vertical"});
//<meta charset="utf-8">
	//<style>
	//#demo-frame > div.demo { padding: 10px !important; };
	//</style>
	//<script>
	$(function() {
		var PowConstant = 10 * 9.8 * 0.5; //Flow * G * k
		$( "#height_slider" ).slider({
			orientation: "vertical",
			//height: 50;
			//range: true,
			values: [ 50 ],
			slide: function( event, ui ) {
				$( "#Level" ).val( ui.values[ 0 ] );
				var Pow = $("#Level").val() * PowConstant; //water * PowConstant
				$( "#Power" ).val(Pow);
			}
		});
		$( "#Level" ).val($( "#height_slider" ).slider( "values", 0 ));
		$( "#Power" ).val($( "#Level" ).val() * PowConstant);
	});
	</script>

</div><!--end controlls-->
</div><!--end col2-->

<div id="column3">
<div id="forms">
	<b>Water Level:</b><input id="Level" type="text"/><br/>
	<b>Power Generated:</b><input id="Power" type="text" value="20"/><br/>
	<input id="Update" type="Submit" value="Update Values" onclick="update()"/><br/>
	<p>Power = Water Level * Flow of Water * gravity * efficiency</p><br/>
	<p>Water Level: Meters<p>
	<p>Flow of Water: Density of Water * Area of Pipe * Velocity of Water (Uniform)</p>
	<p>Efficiency: somewhere between 0 and 1</p>
</div><!-- end forms-->
 
</div><!--end column3-->

</div><!--end content--> 
 
</div><!--end container--> 	


    </body>
</html>


